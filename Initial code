/* *****************
* Basic calculator
* (-+/*)
*******************/


#include <stdio.h>
#include <stdlib.h>

int main()
{
    int functionLocation,i, Counter;
    double *variables;
    char function,input[100], *parsed,Test;
    //allow variable number of inputs

    if((variables=malloc(2*sizeof(double)))==NULL)
    {
        return(1);
    }


    //get user input
    printf("Calculator. Please enter the equation.\n");
    fgets(input,sizeof(input),stdin);

    //determine first number, determine function, determine second number
    Counter=0;
    parsed=input;
    while(Test!='\n' || Test!=EOF)
    {
        if(isdigit(parsed))
        {
            variables[Counter]=strtod(parsed,&parsed);
            if((realloc(variables,sizeof(variables)+sizeof(double)))==NULL)
               {
                   return(1);
               }
        }
        else
        {
            parsed++;
        }
    }

    //Outputs the required equations to the screen
    switch(function)
    {
    case '+': printf("%e\n",variables[0]+variables[1]); break;
    case '-': printf("%e\n",variables[0]-variables[1]); break;
    case '*': printf("%e\n",variables[0]*variables[1]); break;
    case '/': if(variables[1]!=0){printf("%f\n",variables[0]/variables[1]);} break;
    default : printf("Inputs not recognised.\n");
    }

return(0);
}

