/* *****************
* Basic calculator
* (-+/*)
*******************/


#include <stdio.h>
#include <stdlib.h>

int main()
{
    int functionLocation,i, Counter,fCounter=0;
    double *variables;
    char function[20],input[100], *parsed,Test;
    //allow variable number of inputs

    if((variables=malloc(2*sizeof(double)))==NULL)
    {
        return(1);
    }


    //get user input
    printf("Calculator. Please enter the equation.\n");
    fgets(input,sizeof(input),stdin);

    //determine first number, determine function, determine second number
    Counter=0;
    parsed=input;
    while((Test=*parsed)!='\n' && Test!=EOF)
    {
        if(isdigit(*parsed))
        {
            printf("hi\n");
            variables[Counter]=strtod(parsed,&parsed);
            printf("number:%lf\n",variables[Counter]);
            Counter++;
            if((realloc(variables,sizeof(variables)+sizeof(double)))==NULL)
               {
                   free(variables);
                   return(1);
               }
        }
        else
        {

            function[fCounter]=*parsed;
            fCounter++;
            parsed++;
        }
    }

    //Outputs the required equations to the screen
    switch(function[0])
    {
    case '+': printf("%e\n",variables[0]+variables[1]); break;
    case '-': printf("%e\n",variables[0]-variables[1]); break;
    case '*': printf("%e\n",variables[0]*variables[1]); break;
    case '/': if(variables[1]!=0){printf("%f\n",variables[0]/variables[1]);} break;
    default : printf("Inputs not recognised.\n");
    }
free(variables);
return(0);
}

